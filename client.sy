f :: fn a:int {
    n_rpc_clients' g, a
}

g :: fn a:int {
    print a
}

init :: fn {
    l_bind_key("f", "send")

    l_bind_quit("quit")
    l_bind_key("ESCAPE", "quit")
}

update :: fn delta:float {
    if l_input_pressed("send") {
        n_rpc_server' f, 1
    }
}

start :: fn {
    n_rpc_connect' "127.0.0.1"
    l_update'

    init'
    loop !l_input_down("quit") {
        n_rpc_resolve'

        l_update'
        l_render'
        update' l_delta'
    }
}
